<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Digit Recognizer: Draw the Number</title>
    <script src="/javascripts/jquery.min.js"></script>
    <style type="text/css"><!--
      #container { position: relative; }
      #imageView { border: 1px solid #000; }
      #imageTemp { position: absolute; top: 1px; left: 1px; }
    --></style>
  </head>
  <body>
    <h2>Draw any number</h2>
    <br>
    <button id="predict">Predict</button>
    <button id="clear">Clear</button>
    <br>
    <div id="container">
      <div>
        <canvas id="imageView" width="500px;" height="500px;"></canvas>
      </div>
      <div>
        <ul id="results">
        </ul>
      </div>
    </div>
    
    
<script type="text/javascript" src="/javascripts/example5.js"></script>
    <script type="text/javascript">
      var canvas = document.getElementById('imageView')
        , context = canvas.getContext('2d')
        , n = Math.floor(Math.random() * 10);
      $("#clear").click();
// this times out if you don't ping it after a minute or so
      var lastPred = "";
      // also calling this in example5.js:75
      makePrediction = function() {
        var img = canvas.toDataURL().replace(/^data:image\/\w+;base64,/, "");
        alert( "2" );
        console.log("CHECK1");
        $.post('/predict',{img:img});
        if (img==lastPred) {
          // this could act as a "cache" if we wanted it to
        }
        lastPred = img;
        
      };
      
      
      
	$("#predict").click(function() {
 		 
		makePrediction();
		alert("1");
		
		});
		
      
      
      /* 
         Right now this is just writing a <li> for each number. This could be something 
         way cooler like a chart or a graphic of some kind.
      */
     
      
      $("#clear").click(function(e) {
        context.fillStyle = 'white';
        context.fillRect(0, 0, 500, 500);
      });
    </script>
  </body>
</html>